extend = { path = "../cargo-make/common.toml" }

[tasks.ci]
alias = "verify-flow"

[tasks.verify-flow]
dependencies = ["pre-verify", "verify", "post-verify"]

[tasks.verify]
dependencies = ["check-style", "test-unit-and-e2e"]

[tasks.test-unit-and-e2e]
dependencies = ["test-flow", "test-e2e-flow"]

[tasks.pre-verify]

[tasks.post-verify]
dependencies = ["maybe-clean-all"]

[tasks.maybe-clean-all]
condition = { env_true = ["CLEAN_AFTER_VERIFY"] }

[tasks.test-e2e-flow]
dependencies = ["pre-test-e2e", "test-e2e", "post-test-e2e"]

[tasks.pre-test-e2e]

[tasks.test-e2e]

[tasks.post-test-e2e]
