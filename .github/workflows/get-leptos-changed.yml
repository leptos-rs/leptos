name: Get Leptos Changed Call
on:
  workflow_call:
    outputs:
      leptos_changed:
        description: "Leptos Changed"
        value: ${{ jobs.create.outputs.leptos_changed }}
jobs:
  create:
    name: Detect Source Change
    runs-on: ubuntu-latest
    outputs:
      leptos_changed: ${{ steps.set-source-changed.outputs.leptos_changed }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Get source files that changed
        id: changed-source
        uses: trmlabs/changed-files@3cafe8b47d83dc1df61b7de8d274088004fda43c
        with:
          files_ignore: |
            .*/**/*
            cargo-make/**/*
            examples/**/*
            projects/**/*
            benchmarks/**/*
            docs/**/*
      - name: List source files that changed
        run: echo '${{ steps.changed-source.outputs.all_changed_files }}'
      - name: Set leptos_changed
        id: set-source-changed
        run: |
          echo "leptos_changed=${{ steps.changed-source.outputs.any_changed }}" >> "$GITHUB_OUTPUT"
